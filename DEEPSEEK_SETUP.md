# Настройка DeepSeek API

## Описание

DeepSeek API интегрирован в приложение для распознавания продуктов по фото и генерации рецептов с учетом возраста и аллергий ребенка.

## Настройка

### 1. Получение API ключа

1. Зарегистрируйтесь на [DeepSeek](https://platform.deepseek.com/)
2. Перейдите в раздел API Keys
3. Создайте новый API ключ
4. Скопируйте ключ (формат: `sk-...`)

### 2. Добавление ключа в проект

Создайте или отредактируйте файл `.env` в корне проекта:

```env
VITE_DEEPSEEK_API_KEY=sk-ваш-ключ-здесь
```

**Важно:** Файл `.env` уже добавлен в `.gitignore` и не будет закоммичен в репозиторий.

### 3. Перезапуск приложения

После добавления ключа перезапустите dev-сервер:

```bash
npm run dev
```

## Использование

### Распознавание продуктов по фото

1. Откройте страницу "Сканировать"
2. Сфотографируйте или выберите фото продуктов
3. DeepSeek AI автоматически распознает продукты на изображении
4. Подтвердите найденные продукты
5. Нажмите "Создать рецепт с DeepSeek"

### Генерация рецептов

После распознавания продуктов:
- DeepSeek создаст рецепт с учетом:
  - Возраста ребенка (из профиля)
  - Аллергий ребенка (из профиля)
  - Распознанных продуктов
- Рецепт автоматически сохранится в базе данных
- Вы сможете просмотреть и отредактировать рецепт

## Особенности

- **Распознавание продуктов:** DeepSeek анализирует изображение и находит все продукты питания
- **Учет возраста:** Рецепты адаптируются под возраст ребенка
- **Учет аллергий:** Продукты с аллергенами исключаются из рецептов
- **Автоматическое сохранение:** Созданные рецепты сохраняются в базе данных

## Решение проблем

### Ошибка "DeepSeek не настроен"

- Проверьте, что файл `.env` существует в корне проекта
- Убедитесь, что переменная `VITE_DEEPSEEK_API_KEY` установлена
- Перезапустите dev-сервер после изменения `.env`

### Ошибка авторизации (401/403)

- Проверьте правильность API ключа
- Убедитесь, что ключ активен в панели DeepSeek
- Проверьте баланс аккаунта DeepSeek

### Проблемы с распознаванием изображений

- Убедитесь, что изображение четкое и хорошо освещено
- Разложите продукты на светлом фоне
- Попробуйте другое фото, если распознавание не удалось

## Безопасность

⚠️ **Важно:** API ключ хранится в `.env` файле, который не коммитится в репозиторий. 

Для продакшена рекомендуется:
- Использовать backend proxy для защиты API ключей
- Не хранить ключи в клиентском коде
- Использовать переменные окружения на сервере

## API Endpoints

DeepSeek использует стандартный OpenAI-совместимый API:
- Base URL: `https://api.deepseek.com/v1`
- Model: `deepseek-chat`
- Endpoint: `/chat/completions`
